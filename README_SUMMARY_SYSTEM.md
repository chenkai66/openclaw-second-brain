# æ™ºèƒ½å¯¹è¯æ€»ç»“ç³»ç»Ÿ - å®Œæ•´æŒ‡å—

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

ä¸€ä¸ªå®Œå…¨è‡ªåŠ¨åŒ–çš„å¯¹è¯æ€»ç»“ç³»ç»Ÿï¼Œä½¿ç”¨å¤§æ¨¡å‹æ™ºèƒ½åˆ¤æ–­å¯¹è¯å½’å±ï¼Œè‡ªåŠ¨åˆå¹¶åˆ°ç°æœ‰ç¬”è®°æˆ–åˆ›å»ºæ–°ç¬”è®°ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åˆå§‹åŒ–ç³»ç»Ÿ
```bash
npm run summary:init
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

### 3. æ‰§è¡Œå®Œæ•´æµç¨‹
```bash
npm run summary:pipeline
```

### 4. æµ‹è¯•APIåŠŸèƒ½
```bash
npm run summary:test-convert
```

## ğŸ“Š æ ¸å¿ƒåŠŸèƒ½

### æ™ºèƒ½åˆå¹¶ç­–ç•¥

ç³»ç»Ÿä½¿ç”¨å¤§æ¨¡å‹åˆ†æå¯¹è¯å†…å®¹ï¼Œè‡ªåŠ¨å†³å®šï¼š

1. **Mergeï¼ˆåˆå¹¶ï¼‰** - èå…¥ç°æœ‰ç¬”è®°
   - å†…å®¹ç›¸å…³ä¸”å¯ä»¥è¡¥å……ç°æœ‰çŸ¥è¯†
   - ä¿ç•™åŸç¬”è®°åˆ›å»ºæ—¥æœŸ
   - æ›´æ–°ä¿®æ”¹æ—¶é—´å’Œå¯¹è¯è®¡æ•°
   - æ™ºèƒ½æ•´åˆåˆ°ç›¸å…³ç« èŠ‚

2. **Create Newï¼ˆæ–°å»ºï¼‰** - åˆ›å»ºæ–°ç¬”è®°
   - ç‹¬ç«‹çš„æ–°ä¸»é¢˜
   - å†…å®¹è¶³å¤Ÿæ·±å…¥å®Œæ•´
   - ä¸ç°æœ‰ç¬”è®°å…³è”åº¦ä½

3. **Create Log Onlyï¼ˆä»…æ—¥å¿—ï¼‰** - åªè®°å½•æ—¥å¿—
   - å¯¹è¯å¤ªç®€çŸ­æˆ–çç¢
   - ä¸é€‚åˆå½¢æˆçŸ¥è¯†æ–‡æ¡£

### é²æ£’æ€§å¢å¼º

âœ… **æ•°æ®éªŒè¯**
- éªŒè¯å¯¹è¯IDã€æ‘˜è¦ã€å…³é”®è¯æ ¼å¼
- æ£€æŸ¥å¿…éœ€å­—æ®µå®Œæ•´æ€§
- é˜²æ­¢ç©ºæ•°æ®å’Œæ— æ•ˆæ•°æ®

âœ… **é”™è¯¯å¤„ç†**
- å¤šå±‚try-catchä¿æŠ¤
- å¤§æ¨¡å‹è°ƒç”¨å¤±è´¥è‡ªåŠ¨é‡è¯•3æ¬¡
- é™çº§åˆ°æ‰‹åŠ¨åˆå¹¶æ–¹æ¡ˆ
- è¯¦ç»†é”™è¯¯æ—¥å¿—å’ŒæŠ¥å‘Š

âœ… **é˜²é‡å¤å¤„ç†**
- ä½¿ç”¨Setè·Ÿè¸ªå·²å¤„ç†å¯¹è¯
- æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨
- æ£€æŸ¥ç¬”è®°æ˜¯å¦å·²åŒ…å«å¯¹è¯ID

âœ… **æ–‡ä»¶åå®‰å…¨**
- æ¸…ç†éæ³•å­—ç¬¦
- é˜²æ­¢æ–‡ä»¶åå†²çª
- è‡ªåŠ¨æ·»åŠ æ—¶é—´æˆ³å»é‡

âœ… **å¤šæ ¼å¼æ”¯æŒ**
- æ”¯æŒå¤šç§JSONå“åº”æ ¼å¼
- æå–```json```ã€```æˆ–ç›´æ¥JSON
- æ¨¡ç³ŠåŒ¹é…ç¬”è®°æ ‡é¢˜

âœ… **å†…å®¹é™åˆ¶**
- é™åˆ¶æ‘˜è¦é•¿åº¦ï¼ˆ500å­—ç¬¦ï¼‰
- é™åˆ¶å…³é”®è¯æ•°é‡ï¼ˆ10ä¸ªï¼‰
- é™åˆ¶ç¬”è®°å†…å®¹ï¼ˆ3000å­—ç¬¦ï¼‰
- é˜²æ­¢è¶…å‡ºtokené™åˆ¶

## ğŸ”§ APIæ¥å£

### POST /api/summary/convert

æ™ºèƒ½è½¬æ¢å¯¹è¯ä¸ºMarkdownæ–‡ä»¶

**å‚æ•°**ï¼š
```json
{
  "batch_size": 10,      // æ¯æ¬¡å¤„ç†æ•°é‡ï¼ˆ1-100ï¼‰
  "delay_ms": 1000,      // å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  "skip_existing": true  // è·³è¿‡å·²å¤„ç†
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "result": {
    "processed": 10,
    "merged_to_existing": 3,
    "created_notes": 5,
    "created_logs": 10,
    "updated_notes": [...],
    "errors": [],
    "duration_ms": 25000
  },
  "stats": {
    "success_rate": "95.00%",
    "avg_time_per_conversation": "2500ms"
  }
}
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯1ï¼šå¤„ç†æ–°å¯¹è¯

```bash
# 1. å¤„ç†å¯¹è¯ç”Ÿæˆæ‘˜è¦
npm run summary:process

# 2. è½¬æ¢ä¸ºMarkdown
npm run summary:convert

# æˆ–ä¸€é”®æ‰§è¡Œ
npm run summary:pipeline
```

### åœºæ™¯2ï¼šæ‰¹é‡å¤„ç†

```bash
curl -X POST http://localhost:3000/api/summary/convert \
  -H "Content-Type: application/json" \
  -d '{"batch_size": 20, "delay_ms": 500}'
```

### åœºæ™¯3ï¼šæµ‹è¯•åŠŸèƒ½

```bash
npm run summary:test-convert
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        æ™ºèƒ½åˆå¹¶APIæµ‹è¯•å¥—ä»¶                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” æµ‹è¯•1: æ£€æŸ¥æœåŠ¡å™¨è¿æ¥...
âœ… æœåŠ¡å™¨è¿æ¥æ­£å¸¸

ğŸ” æµ‹è¯•2: å‚æ•°éªŒè¯...
âœ… å‚æ•°éªŒè¯æ­£å¸¸å·¥ä½œ

ğŸ” æµ‹è¯•3: ç©ºæ•°æ®å¤„ç†...
âœ… æœ‰æ•°æ®å¯å¤„ç†

ğŸ” æµ‹è¯•4: å¤„ç†å¯¹è¯...
âœ… å¯¹è¯å¤„ç†æˆåŠŸ
   å¤„ç†æ•°é‡: 3
   åˆå¹¶åˆ°ç°æœ‰ç¬”è®°: 1
   åˆ›å»ºæ–°ç¬”è®°: 2
   åˆ›å»ºæ—¥å¿—: 3
   æˆåŠŸç‡: 100%
```

## ğŸ›ï¸ é…ç½®é€‰é¡¹

ç¼–è¾‘ `summary-config.json`ï¼š

```json
{
  "llm": {
    "model": "qwen-plus",
    "temperature": 0.3,
    "max_tokens": 4000,
    "max_retries": 3
  },
  "processing": {
    "batch_size": 10,
    "delay_ms": 1000
  },
  "intelligent_merger": {
    "enable": true,
    "max_content_length": 3000,
    "max_keywords": 10
  }
}
```

## ğŸ“‚ è¾“å‡ºæ–‡ä»¶

### ç¬”è®°æ–‡ä»¶ï¼ˆcontent/notes/ï¼‰

```markdown
---
title: "Reactæ€§èƒ½ä¼˜åŒ–"
created: 2026-02-10
updated: 2026-02-25
tags: ["react", "performance", "optimization"]
domain: "å‰ç«¯å¼€å‘"
summary: "Reactæ€§èƒ½ä¼˜åŒ–å®Œæ•´æŒ‡å—"
conversation_count: 5
ai_refined: true
---

# Reactæ€§èƒ½ä¼˜åŒ–

## æ¦‚è¿°
...

## ç›¸å…³å¯¹è¯

### 1. 2026-02-10 - useMemoå’ŒuseCallbackçš„ä½¿ç”¨
...

### 2. 2026-02-25 - React.memoä¼˜åŒ–æŠ€å·§
...
```

### æ—¥å¿—æ–‡ä»¶ï¼ˆcontent/logs/ï¼‰

```markdown
---
date: 2026-02-25-17-20-28
type: daily-log
summary: "è®¨è®ºReactæ€§èƒ½ä¼˜åŒ–æŠ€å·§"
topics: ["react", "performance"]
domain: "å‰ç«¯å¼€å‘"
topic: "Reactæ€§èƒ½ä¼˜åŒ–"
sentiment: "positive"
ai_generated: true
---

# 2026-02-25 17:20:28 - Reactæ€§èƒ½ä¼˜åŒ–

## å¯¹è¯æ‘˜è¦
...

## å¤„ç†å†³ç­–
merge - å¯ä»¥è¡¥å……ç°æœ‰Reactæ€§èƒ½ä¼˜åŒ–ç¬”è®°
```

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæœåŠ¡å™¨æœªè¿è¡Œ
```bash
# æ£€æŸ¥
curl http://localhost:3000/api/summary/stats

# è§£å†³
npm run dev
```

### é—®é¢˜2ï¼šæ²¡æœ‰å¯¹è¯æ•°æ®
```bash
# å…ˆå¤„ç†å¯¹è¯
npm run summary:process

# å†è½¬æ¢
npm run summary:convert
```

### é—®é¢˜3ï¼šå¤§æ¨¡å‹è°ƒç”¨å¤±è´¥
- æ£€æŸ¥APIå¯†é’¥é…ç½®
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç³»ç»Ÿä¼šè‡ªåŠ¨é‡è¯•3æ¬¡
- å¤±è´¥åé™çº§åˆ°æ‰‹åŠ¨åˆå¹¶

### é—®é¢˜4ï¼šæ–‡ä»¶ç”Ÿæˆå¤±è´¥
```bash
# æ£€æŸ¥ç›®å½•æƒé™
ls -la content/notes/ content/logs/

# æ‰‹åŠ¨åˆ›å»ºç›®å½•
mkdir -p content/notes content/logs
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

- **æ‰¹é‡å¤§å°**ï¼šé»˜è®¤10ä¸ªï¼Œå¯æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è°ƒæ•´
- **å»¶è¿Ÿæ—¶é—´**ï¼šé»˜è®¤1000msï¼Œé¿å…APIé™æµ
- **å†…å®¹æˆªæ–­**ï¼šé™åˆ¶é•¿åº¦é˜²æ­¢è¶…å‡ºtoken
- **é‡è¯•æœºåˆ¶**ï¼šå¤±è´¥è‡ªåŠ¨é‡è¯•ï¼Œæé«˜æˆåŠŸç‡
- **é™çº§æ–¹æ¡ˆ**ï¼šå¤§æ¨¡å‹å¤±è´¥æ—¶æ‰‹åŠ¨åˆå¹¶

## ğŸ‰ æ€»ç»“

ç°åœ¨ç³»ç»Ÿå·²ç»ï¼š
- âœ… å®Œå…¨è‡ªåŠ¨åŒ–å¤„ç†å¯¹è¯
- âœ… æ™ºèƒ½åˆ¤æ–­åˆå¹¶ç­–ç•¥
- âœ… é²æ£’çš„é”™è¯¯å¤„ç†
- âœ… æ”¯æŒå¤šç§å¯¹è¯æ ¼å¼
- âœ… å®Œæ•´çš„æµ‹è¯•å¥—ä»¶
- âœ… è¯¦ç»†çš„æ—¥å¿—å’Œç»Ÿè®¡

**ä¸€é”®æ‰§è¡Œï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ï¼** ğŸš€

